{% extends 'index.html' %}
{% load static %}

{% block title %}Finanças{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/financas.css' %}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'js/financas.js' %}" defer></script>
{% endblock %}

{% block body %}

<div class="finance-page">

    <div class="top-info">
        <h2 class="titulo">FINANÇAS DA CASA</h2>

        <div class="cards">
            <div class="saldo-card">
                <h3>Saldo do Mês</h3>
                <p class="saldo-valor">R$ {{ saldo }}</p>
            </div>

            <div class="detalhes-card">
                <p class="entrada">Entradas: R$ {{ total_renda }}</p>
                <p class="saida">Saídas: R$ {{ total_gastos }}</p>
            </div>
        </div>
    </div>

    <div class="conteudo-financas">

        <div class="grafico-box">
            <canvas id="graficoDiario"></canvas>
        </div>

        <div class="transacoes-box">
            <h3>Transações</h3>
            <div id="listaTransacoes" class="lista-transacoes">
            </div>
        </div>

    </div>

    {% if is_responsavel %}
    <div class="acoes-financas">
        <button id="btnTransacao" class="btn-transacao">Adicionar Transação</button>
    </div>
    {% endif %}

</div>

<div id="modalFinanceiro" class="modal">
    <div class="modal-content">
        <h3>Adicionar Transação</h3>

        <input id="valorInput" type="number" placeholder="Valor R$">
        <input id="localInput" type="text" placeholder="Local (opcional)">
        <input id="dataInput" type="date">
        <textarea id="notaInput" placeholder="Descrição (opcional)"></textarea>

        <div class="categorias">
            <label><input type="radio" name="cat" value="renda" checked> Entrada</label>
            <label><input type="radio" name="cat" value="gasto"> Saída</label>
        </div>

        <div class="modal-actions">
            <button id="cancelar">Cancelar</button>
            <button id="confirmar">Confirmar</button>
        </div>
    </div>
</div>

<div id="modalEditar" class="modal">
    <div class="modal-content">
        <h3>Editar Transação</h3>

        <input id="editValor" type="number">
        <input id="editLocal" type="text" placeholder="Local (opcional)">
        <input id="editData" type="date">
        <textarea id="editNota" placeholder="Descrição (opcional)"></textarea>

        <div class="categorias">
            <label><input type="radio" name="editCat" value="renda"> Entrada</label>
            <label><input type="radio" name="editCat" value="gasto"> Saída</label>
        </div>

        <div class="modal-actions">
            <button id="cancelarEdit">Cancelar</button>
            <button id="confirmarEdit">Salvar</button>
        </div>
    </div>
</div>


<div id="toastSucesso" class="toast">Sucesso ✅</div>

{% endblock %}