{% load static %}

<nav class="main-nav">
    <div class="nav-container">
        <div class="nav-logo">
            <a href="/">
                <img src="{% static 'img/logo.png' %}" alt="Logo" class="nav-logo-img">
            </a>
        </div>
        
        <div class="nav-toggle" id="navToggle">
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
        </div>
        
        {% if request.user.is_authenticated %}
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item">
                    <button class="nav-theme-toggle" id="themeToggle" title="Alternar Tema">
                        <span class="theme-icon">üåô</span>
                    </button>
                </li>
                <li class="nav-item">
                    <a href="{% url 'logout' %}" class="nav-link">LOGOUT</a>
                </li>
            </ul>
        {% else %}
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item">
                    <button class="nav-theme-toggle" id="themeToggle" title="Alternar Tema">
                        <span class="theme-icon">üåô</span>
                    </button>
                </li>
                <li class="nav-item">
                    <a href="/login" class="nav-link">LOGIN</a>
                </li>
            </ul>
        {% endif %}
    </div>
</nav>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Menu Mobile
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');
        
        navToggle.addEventListener('click', function() {
            navMenu.classList.toggle('show');
            navToggle.classList.toggle('active');
        });

        // Dark Mode
        const themeToggle = document.getElementById('themeToggle');
        
        // Carregar tema salvo
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            themeToggle.querySelector('.theme-icon').textContent = '‚òÄÔ∏è';
        }
        
        // Alternar tema
        themeToggle.addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const themeIcon = themeToggle.querySelector('.theme-icon');
            
            if (currentTheme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.textContent = 'üåô';
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'dark');
            }
        });
    });
</script>